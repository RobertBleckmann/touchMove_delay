{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { EventType } from \"./models\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nexport class AppComponent {\n  constructor(ref) {\n    this.ref = ref;\n    this.EventType = EventType;\n    this.activeEventType$$ = new Subject();\n  }\n  ngOnInit() {\n    // this.activeEventType$$.asObservable().subscribe((eventType: EventType) => {\n    //   console.log('sub', eventType);\n    //   eventType === EventType.PointerEvent\n    //     ? this.addPointerEventListeners()\n    //     : this.addTouchEventListeners();\n    // });\n  }\n  ngOnDestroy() {\n    this.activeEventType$$.unsubscribe();\n  }\n  ngAfterViewInit() {\n    this.canvas = document.querySelector('#Canvas');\n    this.canvas2d = this.canvas.getContext('2d');\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n  }\n  static #_ = this.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    outputs: {\n      activeEventType$$: \"activeEventType$$\"\n    },\n    decls: 7,\n    vars: 3,\n    consts: [[3, \"click\"], [\"id\", \"Canvas\", 2, \"border\", \"1px solid grey\", 3, \"draw\", \"activeEventType\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_0_listener() {\n          return ctx.activeEventType$$.next(ctx.EventType.PointerEvent);\n        });\n        i0.ɵɵtext(1, \" PointerEvents\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_2_listener() {\n          return ctx.activeEventType$$.next(ctx.EventType.TouchEvent);\n        });\n        i0.ɵɵtext(3, \" TouchEvents\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"br\")(5, \"canvas\", 1);\n        i0.ɵɵpipe(6, \"async\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"activeEventType\", i0.ɵɵpipeBind1(6, 1, ctx.activeEventType$$));\n      }\n    },\n    dependencies: [i1.AsyncPipe],\n    styles: [\"canvas[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0FBQ2hCIiwic291cmNlc0NvbnRlbnQiOlsiY2FudmFzIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Subject","EventType","AppComponent","constructor","ref","activeEventType$$","ngOnInit","ngOnDestroy","unsubscribe","ngAfterViewInit","canvas","document","querySelector","canvas2d","getContext","width","window","innerWidth","height","innerHeight","_","i0","ɵɵdirectiveInject","ElementRef","_2","selectors","outputs","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","AppComponent_Template_button_click_0_listener","next","PointerEvent","ɵɵtext","ɵɵelementEnd","AppComponent_Template_button_click_2_listener","TouchEvent","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1"],"sources":["C:\\Workspace\\touchMove_delay\\src\\app\\app.component.ts","C:\\Workspace\\touchMove_delay\\src\\app\\app.component.html"],"sourcesContent":["import {Component, ElementRef, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {Subject, Subscription, withLatestFrom} from 'rxjs';\r\nimport {UserActionManager} from \"./user-action-manager\";\r\nimport {EventType} from \"./models\";\r\n\r\nexport interface LastCoordinates {\r\n  lastX: number;\r\n  lastY: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css'],\r\n})\r\nexport class AppComponent implements OnInit, OnDestroy {\r\n\r\n  public EventType = EventType;\r\n\r\n  @Output()\r\n  public activeEventType$$: Subject<EventType> = new Subject<EventType>();\r\n\r\n  private canvas: HTMLCanvasElement;\r\n  private canvas2d;\r\n\r\n  constructor(private readonly ref: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    // this.activeEventType$$.asObservable().subscribe((eventType: EventType) => {\r\n    //   console.log('sub', eventType);\r\n    //   eventType === EventType.PointerEvent\r\n    //     ? this.addPointerEventListeners()\r\n    //     : this.addTouchEventListeners();\r\n    // });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.activeEventType$$.unsubscribe();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.canvas = document.querySelector('#Canvas');\r\n    this.canvas2d = this.canvas.getContext('2d');\r\n    this.canvas.width = window.innerWidth;\r\n    this.canvas.height = window.innerHeight;\r\n  }\r\n}\r\n","<button (click)=\"activeEventType$$.next(EventType.PointerEvent)\">\r\n  PointerEvents\r\n</button>\r\n<button (click)=\"activeEventType$$.next(EventType.TouchEvent)\">\r\n  TouchEvents\r\n</button>\r\n<br />\r\n<canvas\r\n        id=\"Canvas\"\r\n        [draw]\r\n        [activeEventType]=\"activeEventType$$ | async\"\r\n        style=\"border:1px solid grey;\"> </canvas>\r\n"],"mappings":"AACA,SAAQA,OAAO,QAAqC,MAAM;AAE1D,SAAQC,SAAS,QAAO,UAAU;;;AAYlC,OAAM,MAAOC,YAAY;EAUvBC,YAA6BC,GAAe;IAAf,KAAAA,GAAG,GAAHA,GAAG;IARzB,KAAAH,SAAS,GAAGA,SAAS;IAGrB,KAAAI,iBAAiB,GAAuB,IAAIL,OAAO,EAAa;EAKxB;EAE/CM,QAAQA,CAAA;IACN;IACA;IACA;IACA;IACA;IACA;EAAA;EAGFC,WAAWA,CAAA;IACT,IAAI,CAACF,iBAAiB,CAACG,WAAW,EAAE;EACtC;EAEAC,eAAeA,CAAA;IACb,IAAI,CAACC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;IAC/C,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;IAC5C,IAAI,CAACJ,MAAM,CAACK,KAAK,GAAGC,MAAM,CAACC,UAAU;IACrC,IAAI,CAACP,MAAM,CAACQ,MAAM,GAAGF,MAAM,CAACG,WAAW;EACzC;EAAC,QAAAC,CAAA,G;qBA9BUlB,YAAY,EAAAmB,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,UAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAZtB,YAAY;IAAAuB,SAAA;IAAAC,OAAA;MAAArB,iBAAA;IAAA;IAAAsB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCfzBX,EAAA,CAAAa,cAAA,gBAAiE;QAAzDb,EAAA,CAAAc,UAAA,mBAAAC,8CAAA;UAAA,OAASH,GAAA,CAAA5B,iBAAA,CAAAgC,IAAA,CAAAJ,GAAA,CAAAhC,SAAA,CAAAqC,YAAA,CAA8C;QAAA,EAAC;QAC9DjB,EAAA,CAAAkB,MAAA,uBACF;QAAAlB,EAAA,CAAAmB,YAAA,EAAS;QACTnB,EAAA,CAAAa,cAAA,gBAA+D;QAAvDb,EAAA,CAAAc,UAAA,mBAAAM,8CAAA;UAAA,OAASR,GAAA,CAAA5B,iBAAA,CAAAgC,IAAA,CAAAJ,GAAA,CAAAhC,SAAA,CAAAyC,UAAA,CAA4C;QAAA,EAAC;QAC5DrB,EAAA,CAAAkB,MAAA,qBACF;QAAAlB,EAAA,CAAAmB,YAAA,EAAS;QACTnB,EAAA,CAAAsB,SAAA,SAAM;;;;QAIEtB,EAAA,CAAAuB,SAAA,GAA6C;QAA7CvB,EAAA,CAAAwB,UAAA,oBAAAxB,EAAA,CAAAyB,WAAA,OAAAb,GAAA,CAAA5B,iBAAA,EAA6C"},"metadata":{},"sourceType":"module","externalDependencies":[]}